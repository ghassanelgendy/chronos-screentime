<ui:FluentWindow x:Class="chronos_screentime.MainWindow"		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
	xmlns:local="clr-namespace:chronos_screentime"
        mc:Ignorable="d"
        Title="Chronos Screen Time Tracker"
        Background="{DynamicResource ApplicationBackgroundBrush}" 
        WindowStartupLocation="CenterScreen"
        Icon="pack://application:,,,/icon.ico"
        UseLayoutRounding="True" TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType"
        ExtendsContentIntoTitleBar="True">
    <Window.Resources>
        <ResourceDictionary>
            <!-- Width converter for adaptive layout -->
            <local:WrapPanelWidthConverter x:Key="WrapPanelWidthConverter"/>
            <!-- Text Block Styles -->
            <Style x:Key="BodyTextBlockStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
                <Setter Property="LineHeight" Value="20"/>
                <Setter Property="LineStackingStrategy" Value="BlockLineHeight"/>
            </Style>
            <!-- Custom Brushes -->
            <SolidColorBrush x:Key="ApplicationBackgroundBrush" Color="{DynamicResource ApplicationBackgroundColor}"/>
            <SolidColorBrush x:Key="ControlFillColorTransparentBrush" Color="#00000000"/>
            <SolidColorBrush x:Key="LayerFillColorDefaultBrush" Color="{DynamicResource LayerFillColorDefault}"/>
            <SolidColorBrush x:Key="ControlStrokeColorDefaultBrush" Color="{DynamicResource ControlStrokeColorDefault}"/>
            <SolidColorBrush x:Key="TextFillColorPrimaryBrush" Color="{DynamicResource TextFillColorPrimary}"/>
            <SolidColorBrush x:Key="TextFillColorSecondaryBrush" Color="{DynamicResource TextFillColorSecondary}"/>
            <SolidColorBrush x:Key="AccentFillColorDefaultBrush" Color="{DynamicResource AccentFillColorDefault}"/>
            <SolidColorBrush x:Key="AccentFillColorSecondaryBrush" Color="{DynamicResource AccentFillColorSecondary}"/>
            <SolidColorBrush x:Key="SystemFillColorSolidNeutralBrush" Color="{DynamicResource SystemFillColorSolidNeutral}"/>
            <SolidColorBrush x:Key="SystemFillColorSuccessBrush" Color="{DynamicResource SystemFillColorSuccess}"/>
            <SolidColorBrush x:Key="TextOnAccentFillColorPrimaryBrush" Color="{DynamicResource TextOnAccentFillColorPrimary}"/>
            <SolidColorBrush x:Key="TextOnAccentFillColorSecondaryBrush" Color="{DynamicResource TextOnAccentFillColorSecondary}"/>
            <!-- Button Style -->
            <Style x:Key="SidebarToggleStyle" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="8"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{DynamicResource ControlFillColorSecondaryBrush}"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Background" Value="{DynamicResource ControlFillColorTertiaryBrush}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
            <!-- Global Accent-Colored Thin Scrollbar Styles -->
            <Style TargetType="ScrollBar">
                <Setter Property="Background" Value="{DynamicResource ControlFillColorTransparentBrush}"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Margin" Value="0"/>
                <Setter Property="Width" Value="8"/>
                <Setter Property="MinWidth" Value="8"/>
                <Style.Triggers>
                    <Trigger Property="Orientation" Value="Horizontal">
                        <Setter Property="Width" Value="Auto"/>
                        <Setter Property="MinWidth" Value="0"/>
                        <Setter Property="Height" Value="8"/>
                        <Setter Property="MinHeight" Value="8"/>
                    </Trigger>
                    <Trigger Property="Orientation" Value="Vertical">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ScrollBar">
                                    <Grid Background="{TemplateBinding Background}" Width="8">
                                        <Track Name="PART_Track" IsDirectionReversed="True" Grid.Row="1">
                                            <Track.DecreaseRepeatButton>
                                                <RepeatButton Command="ScrollBar.PageUpCommand" Opacity="0" Focusable="False"/>
                                            </Track.DecreaseRepeatButton>
                                            <Track.IncreaseRepeatButton>
                                                <RepeatButton Command="ScrollBar.PageDownCommand" Opacity="0" Focusable="False"/>
                                            </Track.IncreaseRepeatButton>
                                            <Track.Thumb>
                                                <Thumb Background="{DynamicResource AccentFillColorDefaultBrush}" BorderBrush="Transparent" Width="6" Margin="1">
                                                    <Thumb.Style>
                                                        <Style TargetType="Thumb">
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="Thumb">
                                                                        <Border Background="{TemplateBinding Background}" 
                                                                               CornerRadius="3" 
                                                                               BorderThickness="0"
                                                                               Opacity="0.8"/>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="{DynamicResource AccentFillColorSecondaryBrush}"/>
                                                                    <Setter Property="Opacity" Value="1"/>
                                                                </Trigger>
                                                                <Trigger Property="IsDragging" Value="True">
                                                                    <Setter Property="Background" Value="{DynamicResource AccentFillColorSecondaryBrush}"/>
                                                                    <Setter Property="Opacity" Value="1"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Thumb.Style>
                                                </Thumb>
                                            </Track.Thumb>
                                        </Track>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="Orientation" Value="Horizontal">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ScrollBar">
                                    <Grid Background="{TemplateBinding Background}" Height="8">
                                        <Track Name="PART_Track" Grid.Column="1">
                                            <Track.DecreaseRepeatButton>
                                                <RepeatButton Command="ScrollBar.PageLeftCommand" Opacity="0" Focusable="False"/>
                                            </Track.DecreaseRepeatButton>
                                            <Track.IncreaseRepeatButton>
                                                <RepeatButton Command="ScrollBar.PageRightCommand" Opacity="0" Focusable="False"/>
                                            </Track.IncreaseRepeatButton>
                                            <Track.Thumb>
                                                <Thumb Background="{DynamicResource AccentFillColorDefaultBrush}" BorderBrush="Transparent" Height="6" Margin="1">
                                                    <Thumb.Style>
                                                        <Style TargetType="Thumb">
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="Thumb">
                                                                        <Border Background="{TemplateBinding Background}" 
                                                                               CornerRadius="3" 
                                                                               BorderThickness="0"
                                                                               Opacity="0.8"/>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="{DynamicResource AccentFillColorSecondaryBrush}"/>
                                                                    <Setter Property="Opacity" Value="1"/>
                                                                </Trigger>
                                                                <Trigger Property="IsDragging" Value="True">
                                                                    <Setter Property="Background" Value="{DynamicResource AccentFillColorSecondaryBrush}"/>
                                                                    <Setter Property="Opacity" Value="1"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Thumb.Style>
                                                </Thumb>
                                            </Track.Thumb>
                                        </Track>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
            <!-- Global ScrollViewer Style -->
            <Style TargetType="ScrollViewer">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ScrollViewer">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ScrollContentPresenter Grid.Column="0" Grid.Row="0"/>
                                <ScrollBar Grid.Column="1" Grid.Row="0"
                                         Name="PART_VerticalScrollBar"
                                         Value="{TemplateBinding VerticalOffset}"
                                         Maximum="{TemplateBinding ScrollableHeight}"
                                         ViewportSize="{TemplateBinding ViewportHeight}"
                                         Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                                <ScrollBar Grid.Column="0" Grid.Row="1"
                                         Name="PART_HorizontalScrollBar"
                                         Orientation="Horizontal"
                                         Value="{TemplateBinding HorizontalOffset}"
                                         Maximum="{TemplateBinding ScrollableWidth}"
                                         ViewportSize="{TemplateBinding ViewportWidth}"
                                         Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <!-- Legacy Button Styles (for compatibility) - Now all buttons use WPF.UI -->
            <!-- Save Confirmation Fade Out Animation -->
            <Storyboard x:Key="SaveConfirmationFadeOutStoryboard">
                <DoubleAnimation Storyboard.TargetName="SaveConfirmationMessage" 
                                Storyboard.TargetProperty="(UIElement.Opacity)"
                                From="1" To="0" Duration="0:0:1"
                                BeginTime="0:0:1"
                                FillBehavior="Stop"/>
            </Storyboard>
            <!-- Page Transition Animations -->
            <Storyboard x:Key="FadeInUpAnimation">
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                               From="0" To="1" Duration="0:0:0.4"
                               DecelerationRatio="0.8"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                               From="30" To="0" Duration="0:0:0.4"
                               DecelerationRatio="0.8"/>
            </Storyboard>
            <Storyboard x:Key="FadeOutDownAnimation">
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                               From="1" To="0" Duration="0:0:0.3"
                               AccelerationRatio="0.8"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                               From="0" To="-30" Duration="0:0:0.3"
                               AccelerationRatio="0.8"/>
            </Storyboard>
            
            <!-- Windows-style Float In Animation for Settings Cards -->
            <Storyboard x:Key="SettingsCardFloatInAnimation">
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                               From="0" To="1" Duration="0:0:0.5"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                               From="40" To="0" Duration="0:0:0.5"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                               From="0.95" To="1" Duration="0:0:0.5"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                               From="0.95" To="1" Duration="0:0:0.5"
                               DecelerationRatio="0.9"/>
            </Storyboard>
            
            <!-- Staggered Animation for Multiple Cards -->
            <Storyboard x:Key="SettingsCard1FloatInAnimation">
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                               From="0" To="1" Duration="0:0:0.5"
                               BeginTime="0:0:0.1"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                               From="40" To="0" Duration="0:0:0.5"
                               BeginTime="0:0:0.1"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                               From="0.95" To="1" Duration="0:0:0.5"
                               BeginTime="0:0:0.1"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                               From="0.95" To="1" Duration="0:0:0.5"
                               BeginTime="0:0:0.1"
                               DecelerationRatio="0.9"/>
            </Storyboard>
            
            <Storyboard x:Key="SettingsCard2FloatInAnimation">
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                               From="0" To="1" Duration="0:0:0.5"
                               BeginTime="0:0:0.2"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                               From="40" To="0" Duration="0:0:0.5"
                               BeginTime="0:0:0.2"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                               From="0.95" To="1" Duration="0:0:0.5"
                               BeginTime="0:0:0.2"
                               DecelerationRatio="0.9"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                               From="0.95" To="1" Duration="0:0:0.5"
                               BeginTime="0:0:0.2"
                               DecelerationRatio="0.9"/>
            </Storyboard>
            <!-- App List Item Animation -->
            <Storyboard x:Key="AppListItemFadeInAnimation">
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                               From="0" To="1" Duration="0:0:0.5"/>
                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                               From="20" To="0" Duration="0:0:0.5"
                               DecelerationRatio="0.7"/>
            </Storyboard>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar
            Title="Chronos Screen Time Tracker"
            Grid.Row="0"
            Icon="pack://application:,,,/icon.ico"
            ShowMaximize="True"
            ShowMinimize="True"/>

        <!-- Main Layout with Navigation -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Navigation View -->
            <ui:NavigationView x:Name="MainNavigationView" Grid.Column="0"
                               IsBackButtonVisible="Collapsed"
                               IsPaneToggleVisible="True"
                               PaneDisplayMode="Left"
                               PaneTitle="Chronos">
                <!-- Navigation Menu Items -->
                <ui:NavigationView.MenuItems>
                    <ui:NavigationViewItem x:Name="TodayNavItem" Content="Today" Tag="Today" Click="ShowToday_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="📅" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="YesterdayNavItem" Content="Yesterday" Tag="Yesterday" Click="ShowYesterday_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="⏮️" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="ThisWeekNavItem" Content="This Week" Tag="ThisWeek" Click="ShowThisWeek_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="📊" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="LastWeekNavItem" Content="Last Week" Tag="LastWeek" Click="ShowLastWeek_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="📉" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="ThisMonthNavItem" Content="This Month" Tag="ThisMonth" Click="ShowThisMonth_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="📈" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItemSeparator/>
                    <ui:NavigationViewItem x:Name="WebBrowsingNavItem" Content="Web Browsing" Tag="WebBrowsing" Click="FilterByCategory_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="🌐" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="DevelopmentNavItem" Content="Development" Tag="Development" Click="FilterByCategory_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="💻" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="GamingNavItem" Content="Gaming" Tag="Gaming" Click="FilterByCategory_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="🎮" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="CommunicationNavItem" Content="Communication" Tag="Communication" Click="FilterByCategory_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="💬" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="ProductivityNavItem" Content="Productivity" Tag="Productivity" Click="FilterByCategory_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="📋" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="EntertainmentNavItem" Content="Entertainment" Tag="Entertainment" Click="FilterByCategory_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="🎬" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                </ui:NavigationView.MenuItems>
                <!-- Footer Menu Items -->
                <ui:NavigationView.FooterMenuItems>
                    <ui:NavigationViewItem x:Name="ChartsNavItem" Content="Charts" Click="ShowLiveDashboard_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="📊" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="ExportNavItem" Content="Export" Click="ExportCSV_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="💾" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                    <ui:NavigationViewItem x:Name="PreferencesNavItem" Content="Preferences" Click="ShowPreferences_Click">
                        <ui:NavigationViewItem.Icon>
                            <ui:FontIcon Glyph="⚙️" />
                        </ui:NavigationViewItem.Icon>
                    </ui:NavigationViewItem>
                </ui:NavigationView.FooterMenuItems>
                <!-- Pane Header with Stats -->
                <ui:NavigationView.PaneHeader>
                    <ui:Card Margin="8" Padding="16">
                        <StackPanel>
                            <TextBlock x:Name="SidebarCurrentPeriod" Text="Today" 
                                       FontWeight="Bold" FontSize="14" Margin="0,0,0,8"
                                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="⏱️ " Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="SidebarTotalTime" Text="0h 0m"
                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="🔄 " Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="SidebarSwitches" Text="0 switches"
                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="📱 " Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="SidebarApps" Text="0 apps"
                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </ui:Card>
                </ui:NavigationView.PaneHeader>
            </ui:NavigationView>
            
            <!-- Main Content Area -->
            <Grid x:Name="MainContent" Grid.Column="1">
                <!-- Content Area -->
                <Grid>
                    <!-- Screen Time Content -->
                    <Grid x:Name="ScreenTimeContent" Visibility="Visible">
                        <Grid.RenderTransform>
                            <TranslateTransform/>
                        </Grid.RenderTransform>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Menu Bar (only in main window) -->
                        <ui:Card Grid.Row="0" Margin="16,0,16,16" Padding="24">
                            <DockPanel>
                                <Button x:Name="PreferencesToggleButton" DockPanel.Dock="Right"
                                       Style="{StaticResource SidebarToggleStyle}"
                                       Click="ShowPreferences_Click"
                                       Content="⚙️" 
                                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                       Margin="8,0,8,0"/>
                                <Menu Background="Transparent" 
                                      Foreground="{DynamicResource TextFillColorPrimaryBrush}" 
                                      VerticalAlignment="Center" 
                                      HorizontalAlignment="Center">
                                    <MenuItem Header="_File" Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                                        <MenuItem Header="_Open Data File..." Click="OpenDataFile_Click"/>
                                        <Separator/>
                                        <MenuItem Header="_Export">
                                            <MenuItem Header="Export as _CSV..." Click="ExportCSV_Click"/>
                                            <MenuItem Header="Export _Charts..." Click="ExportCharts_Click"/>
                                            <MenuItem Header="_Auto Export Settings..." Click="AutoExportSettings_Click"/>
                                        </MenuItem>
                                        <Separator/>
                                        <MenuItem Header="E_xit" Click="Exit_Click"/>
                                    </MenuItem>
                                    <MenuItem Header="_View" Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                                        <MenuItem Header="_Charts">
                                            <MenuItem Header="_Pie Chart by Category" Click="ShowPieChart_Click"/>
                                            <MenuItem Header="_Bar Chart by Apps" Click="ShowBarChart_Click"/>
                                            <MenuItem Header="_Live Dashboard" Click="ShowLiveDashboard_Click"/>
                                        </MenuItem>
                                        <MenuItem Header="_Categories">
                                            <MenuItem Header="Manage App _Categories..." Click="ManageCategories_Click"/>
                                            <MenuItem Header="View by _Category" Click="ViewByCategory_Click"/>
                                        </MenuItem>
                                        <Separator/>
                                        <MenuItem Name="AlwaysOnTopMenuItem" Header="_Always on Top" IsCheckable="True" Click="AlwaysOnTop_Click"/>
                                        <MenuItem Name="ShowInTrayMenuItem" Header="_Close to Tray" IsCheckable="True" Click="ShowInTray_Click"/>
                                        <MenuItem Name="HideTitleBarMenuItem" Header="_Hide Title Bar" IsCheckable="True" Click="HideTitleBar_Click"/>
                                    </MenuItem>
                                    <MenuItem Header="_Tools" Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                                        <MenuItem Header="_Tracking">
                                            <MenuItem Header="Track _Idle Time" IsCheckable="True" Click="TrackIdleTime_Click"/>
                                            <MenuItem Header="Track _Sub-processes" IsCheckable="True" Click="TrackSubProcesses_Click"/>
                                            <MenuItem Header="_Process Tree Analysis" Click="ProcessTreeAnalysis_Click"/>
                                            <MenuItem Header="_Most Used Apps" Click="MostUsedApps_Click"/>
                                        </MenuItem>
                                        <MenuItem Header="_Productivity">
                                            <MenuItem Header="Break _Notifications..." Click="BreakNotifications_Click"/>
                                            <MenuItem Header="_Screen Break Notifications..." Click="ScreenBreakNotifications_Click"/>
                                            <MenuItem Header="_Auto Logout Settings..." Click="AutoLogoutSettings_Click"/>
                                            <MenuItem Header="_Distraction Blocking..." Click="DistractionBlocking_Click"/>
                                            <MenuItem Header="_Daily/Weekly Goals..." Click="SetGoals_Click"/>
                                        </MenuItem>
                                        <MenuItem Header="_Health &amp; Wellness">
                                            <MenuItem Header="_Screen Break Reminders..." Click="ScreenBreakNotifications_Click"/>
                                            <MenuItem Header="_Eye Strain Prevention..." Click="ScreenBreakNotifications_Click"/>
                                            <MenuItem Header="_Posture Reminders..." Click="BreakNotifications_Click"/>
                                        </MenuItem>
                                        <Separator/>
                                        <MenuItem Header="_Data Management">
                                            <MenuItem Header="_Merge Consecutive Entries" Click="MergeEntries_Click"/>
                                            <MenuItem Header="_Backup &amp; Sync..." Click="BackupSync_Click"/>
                                            <MenuItem Header="_Clean Old Data..." Click="CleanOldData_Click"/>
                                        </MenuItem>
                                    </MenuItem>
                                    <MenuItem Header="_Help" Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                                        <MenuItem Header="_Tutorial Mode" Click="ShowTutorial_Click"/>
                                        <MenuItem Header="_Keyboard Shortcuts" Click="ShowShortcuts_Click"/>
                                        <MenuItem Header="_Open Source" Click="OpenSource_Click"/>
                                        <Separator/>
                                        <MenuItem Header="_About Chronos" Click="ShowAbout_Click"/>
                                    </MenuItem>
                                </Menu>
                            </DockPanel>
                        </ui:Card>
                        
                        <!-- Summary Stats -->
                        <Border Grid.Row="1" Background="{DynamicResource LayerFillColorDefaultBrush}" Padding="20" BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}" BorderThickness="0,0,0,2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <!-- Total Apps -->
                                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                    <TextBlock Text="Total Apps" FontSize="12" Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                    <TextBlock x:Name="TotalAppsText" Text="0" FontSize="24" FontWeight="Bold" 
                                              Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                                <!-- Total Time -->
                                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                    <TextBlock x:Name="TimeLabel" Text="Today's Screen Time" FontSize="12" Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                    <TextBlock x:Name="TotalTimeText" Text="0h 0m" FontSize="24" FontWeight="Bold" 
                                              Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                                <!-- Total Switches -->
                                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                    <TextBlock x:Name="SwitchesLabel" Text="Today's Switches" FontSize="12" Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                    <TextBlock x:Name="TotalSwitchesText" Text="0" FontSize="24" FontWeight="Bold" 
                                              Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                                <!-- Session Status -->
                                <StackPanel Grid.Column="3" HorizontalAlignment="Center">
                                    <TextBlock Text="Current Session" FontSize="12" Foreground="{DynamicResource TextFillColorPrimaryBrush}" HorizontalAlignment="Center"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <Ellipse x:Name="StatusIndicator" Width="8" Height="8" 
                                                Fill="#E74C3C" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                        <TextBlock x:Name="SessionTimeText" Text="Not tracking" FontSize="14" FontWeight="SemiBold" 
                                                  VerticalAlignment="Center" Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                  UseLayoutRounding="True"
                                                  TextOptions.TextFormattingMode="Display"
                                                  TextOptions.TextRenderingMode="ClearType"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <!-- Controls -->
                        <Border Grid.Row="2" Background="{DynamicResource LayerFillColorDefaultBrush}" Padding="20" BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <ui:Button x:Name="RefreshButton" 
                                           Content="🔄 Refresh" Click="RefreshButton_Click"
                                           Padding="20,10" Margin="10,0" FontWeight="SemiBold"
                                           Cursor="Hand" FontSize="14"
                                           Appearance="Primary"/>
                                <ui:Button x:Name="ResetButton" 
                                           Content="🔄 Reset All" Click="ResetButton_Click"
                                           Padding="20,10" Margin="10,0" FontWeight="SemiBold"
                                           Cursor="Hand" FontSize="14"
                                           Appearance="Danger"/>
                            </StackPanel>
                        </Border>
                        <!-- App List -->
                        <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto" 
                                      PanningMode="VerticalOnly" 
                                      ScrollViewer.CanContentScroll="True">
                            <ItemsControl x:Name="AppListView" Background="Transparent" 
                                         Margin="16">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel x:Name="AppListWrapPanel" Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemContainerStyle>
                                    <Style>
                                        <Setter Property="FrameworkElement.Width" Value="{Binding ActualWidth, ElementName=AppListWrapPanel, Converter={StaticResource WrapPanelWidthConverter}}"/>
                                        <Setter Property="FrameworkElement.MaxWidth" Value="600"/>
                                    </Style>
                                </ItemsControl.ItemContainerStyle>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Margin="8,6" 
                                                Background="{DynamicResource ControlFillColorDefaultBrush}"
                                                BorderBrush="{DynamicResource ControlElevationBorderBrush}"
                                                BorderThickness="1"
                                                CornerRadius="4"
                                                UseLayoutRounding="True"
                                                TextOptions.TextFormattingMode="Display"
                                                TextOptions.TextRenderingMode="ClearType">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="{DynamicResource ControlFillColorSecondaryBrush}"/>
                                                            <Setter Property="BorderBrush" Value="{DynamicResource ControlStrokeColorDefaultBrush}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <Grid Margin="16,12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Left Content -->
                                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                    <!-- App Name -->
                                                    <TextBlock Text="{Binding AppName}" 
                                                              FontSize="14" 
                                                              FontWeight="SemiBold" 
                                                              Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                              TextTrimming="CharacterEllipsis"/>
                                                    
                                                    <!-- Process Path -->
                                                    <TextBlock Text="{Binding ProcessPath}" 
                                                              FontSize="11" 
                                                              Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                              TextTrimming="CharacterEllipsis"
                                                              Margin="0,2,0,0"/>
                                                    
                                                    <!-- Session Info -->
                                                    <StackPanel Orientation="Horizontal" 
                                                              Margin="0,4,0,0">
                                                        <TextBlock Text="Sessions: " 
                                                                  FontSize="11" 
                                                                  Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                                        <TextBlock Text="{Binding SessionCount}" 
                                                                  FontSize="11" 
                                                                  FontWeight="SemiBold"
                                                                  Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                                        <TextBlock Text=" | Last: " 
                                                                  FontSize="11" 
                                                                  Foreground="{DynamicResource TextFillColorSecondaryBrush}" 
                                                                  Margin="8,0,0,0"/>
                                                        <TextBlock Text="{Binding LastSeen, StringFormat='{}{0:MM/dd HH:mm}'}" 
                                                                  FontSize="11" 
                                                                  Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                                    </StackPanel>
                                                </StackPanel>

                                                <!-- Time Display -->
                                                <TextBlock Grid.Column="1" 
                                                          Text="{Binding FormattedTotalTimeShort}" 
                                                          FontSize="16" 
                                                          FontWeight="Bold"
                                                          Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                          VerticalAlignment="Center"
                                                          Margin="24,0,0,0"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                        <!-- Footer -->
                        <Border Grid.Row="4" Background="{DynamicResource AccentFillColorDefaultBrush}" Padding="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Left side - Tracking Status -->
                                <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <TextBlock x:Name="TrackingStatusPrefix" Text="Screentime is currently being tracked click to "
                                              Foreground="{DynamicResource TextOnAccentFillColorSecondaryBrush}" FontSize="11"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"/>
                                    <TextBlock x:Name="TrackingActionWord" Text="stop"
                                              Foreground="{DynamicResource TextOnAccentFillColorPrimaryBrush}" FontSize="11" FontWeight="Bold"
                                              Cursor="Hand" TextDecorations="Underline"
                                              UseLayoutRounding="True"
                                              TextOptions.TextFormattingMode="Display"
                                              TextOptions.TextRenderingMode="ClearType"
                                              MouseLeftButtonDown="TrackingStatusFooter_Click"/>
                                </StackPanel>
                                
                                <!-- Center - empty for spacing -->
                                <Border Grid.Column="1"/>
                                
                                <!-- Right side - Made with love -->
                                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock Text="Made with ❤️ "
                                             Foreground="{DynamicResource TextOnAccentFillColorSecondaryBrush}" 
                                             FontSize="11"
                                             UseLayoutRounding="True"
                                             TextOptions.TextFormattingMode="Display"
                                             TextOptions.TextRenderingMode="ClearType"/>
                                    <TextBlock Foreground="{DynamicResource TextOnAccentFillColorPrimaryBrush}" 
                                             FontSize="11"
                                             UseLayoutRounding="True"
                                             TextOptions.TextFormattingMode="Display"
                                             TextOptions.TextRenderingMode="ClearType">
                                        <Hyperlink NavigateUri="https://github.com/ghassanelgendy/chronos-screentime" 
                                                  RequestNavigate="Hyperlink_RequestNavigate"
                                                  Foreground="{DynamicResource TextOnAccentFillColorPrimaryBrush}"
                                                  TextDecorations="Underline">
                                            (GitHub)
                                        </Hyperlink>
                                    </TextBlock>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                    
                    <!-- Preferences Content -->
                    <Grid x:Name="PreferencesContent" Visibility="Collapsed">
                        <Grid.RenderTransform>
                            <TranslateTransform/>
                        </Grid.RenderTransform>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <ui:Card Grid.Row="0" Margin="0,0,0,16" Padding="16">
                            <Grid>
                                <ui:Button HorizontalAlignment="Left"
                                           Content="← Back"
                                           Appearance="Secondary"
                                           Click="BackToMain_Click"/>
                                <TextBlock Text="Settings"
                                         FontSize="20"
                                         FontWeight="SemiBold"
                                         HorizontalAlignment="Center"
                                         VerticalAlignment="Center"/>
                                <ui:Button HorizontalAlignment="Right"
                                           Content="💾 Apply Changes"
                                           Appearance="Primary"
                                           Click="ApplyPreferences_Click"
                                           Padding="16,8"/>
                            </Grid>
                        </ui:Card>

                        <!-- Settings Content -->
                        <ScrollViewer Grid.Row="1" x:Name="SettingsDetailContent" VerticalScrollBarVisibility="Auto" Margin="16">
                            <StackPanel Margin="0,0,0,24">
                                <!-- System Section -->
                                <ui:Card x:Name="SystemSettingsCard" Padding="24" Margin="0,0,0,24" Opacity="0">
                                    <ui:Card.RenderTransform>
                                        <TransformGroup>
                                            <TranslateTransform Y="40"/>
                                            <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                        </TransformGroup>
                                    </ui:Card.RenderTransform>
                                    <StackPanel>
                                        <TextBlock Text="System" 
                                                 FontSize="24" 
                                                 FontWeight="SemiBold" 
                                                 Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                 Margin="0,0,0,20"/>

                                        <!-- Display -->
                                        <ui:CardExpander Header="Display" Icon="🖥️" Margin="0,0,0,16" IsExpanded="True">
                                            <StackPanel Margin="0,16,0,0">
                                                <StackPanel Margin="0,0,0,20">
                                                    <TextBlock Text="Theme" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                    <ComboBox x:Name="PageThemeComboBox" Width="200" HorizontalAlignment="Left"
                                                            SelectionChanged="PageThemeComboBox_SelectionChanged">
                                                        <ComboBoxItem Content="Light Theme" Tag="Light"/>
                                                        <ComboBoxItem Content="Dark Theme" Tag="Dark"/>
                                                        <ComboBoxItem Content="Auto (System)" Tag="Auto" IsSelected="True"/>
                                                    </ComboBox>
                                                </StackPanel>
                                                <ui:ToggleSwitch x:Name="PageHideTitleBarCheckBox"
                                                               Content="Hide title bar"
                                                               ToolTip="Remove window title bar for cleaner look"
                                                               IsChecked="{Binding ElementName=HideTitleBarMenuItem, Path=IsChecked}"
                                                               Margin="0,0,0,8"/>
                                            </StackPanel>
                                        </ui:CardExpander>

                                        <!-- Window Behavior -->
                                        <ui:CardExpander Header="Window Behavior" Icon="🪟" Margin="0,0,0,16" IsExpanded="True">
                                            <StackPanel Margin="0,16,0,0">
                                                <ui:ToggleSwitch x:Name="PageAlwaysOnTopCheckBox" 
                                                               Content="Always on top"
                                                               ToolTip="Keep Chronos window above other windows"
                                                               IsChecked="{Binding ElementName=AlwaysOnTopMenuItem, Path=IsChecked}"
                                                               Margin="0,0,0,12"/>
                                                <ui:ToggleSwitch x:Name="PageShowInSystemTrayCheckBox"
                                                               Content="Show in system tray"
                                                               ToolTip="Minimize to system tray instead of closing"
                                                               IsChecked="{Binding ElementName=ShowInTrayMenuItem, Path=IsChecked}"
                                                               Margin="0,0,0,12"/>
                                                <ui:ToggleSwitch Content="Start with Windows"
                                                               ToolTip="Launch Chronos when Windows starts"
                                                               Margin="0,0,0,8"/>
                                            </StackPanel>
                                        </ui:CardExpander>

                                        <!-- Auto Export -->
                                        <ui:CardExpander Header="Auto Export" Icon="💾" Margin="0,0,0,8" IsExpanded="True">
                                            <StackPanel Margin="0,16,0,0">
                                                <ui:ToggleSwitch Content="Enable auto export"
                                                               ToolTip="Automatically export data at intervals"
                                                               Margin="0,0,0,16"/>
                                                <StackPanel Margin="0,0,0,8">
                                                    <TextBlock Text="Export frequency" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                    <ComboBox Width="200" HorizontalAlignment="Left">
                                                        <ComboBoxItem Content="1 hour"/>
                                                        <ComboBoxItem Content="6 hours"/>
                                                        <ComboBoxItem Content="12 hours"/>
                                                        <ComboBoxItem Content="1 day" IsSelected="True"/>
                                                        <ComboBoxItem Content="1 week"/>
                                                    </ComboBox>
                                                </StackPanel>
                                            </StackPanel>
                                        </ui:CardExpander>
                                    </StackPanel>
                                </ui:Card>

                                <!-- Notifications Section -->
                                <ui:Card x:Name="NotificationsSettingsCard" Padding="24" Margin="0,0,0,16" Opacity="0">
                                    <ui:Card.RenderTransform>
                                        <TransformGroup>
                                            <TranslateTransform Y="40"/>
                                            <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                        </TransformGroup>
                                    </ui:Card.RenderTransform>
                                    <StackPanel>
                                        <TextBlock Text="Notifications &amp; Wellness" 
                                                 FontSize="24" 
                                                 FontWeight="SemiBold" 
                                                 Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                 Margin="0,0,0,20"/>

                                        <!-- Break Notifications -->
                                        <ui:CardExpander Header="Break Notifications" Icon="⏰" Margin="0,0,0,16" IsExpanded="True">
                                            <StackPanel Margin="0,16,0,0">
                                                <ui:ToggleSwitch x:Name="PageEnableBreakNotificationsCheckBox"
                                                               Content="Enable break notifications"
                                                               ToolTip="Get reminded to take regular breaks from your screen"
                                                               Margin="0,0,0,16"/>
                                                <StackPanel Margin="0,0,0,8">
                                                    <TextBlock Text="Break reminder interval" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                    <Grid Width="200" HorizontalAlignment="Left">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <ui:NumberBox x:Name="PageBreakReminderMinutesTextBox" 
                                                                    Grid.Column="0" 
                                                                    Value="30" 
                                                                    Minimum="1" 
                                                                    Maximum="480"/>
                                                        <TextBlock Grid.Column="1" Text="minutes" 
                                                                 VerticalAlignment="Center" 
                                                                 Margin="8,0,0,0"/>
                                                    </Grid>
                                                </StackPanel>
                                            </StackPanel>
                                        </ui:CardExpander>

                                        <!-- Screen Break -->
                                        <ui:CardExpander Header="Screen Break (20-20-20 Rule)" Icon="👀" Margin="0,0,0,16" IsExpanded="True">
                                            <StackPanel Margin="0,16,0,0">
                                                <ui:InfoBar Title="20-20-20 Rule" 
                                                          Message="Every 20 minutes, look at something 20 feet away for 20 seconds"
                                                          IsOpen="True"
                                                          Severity="Informational"
                                                          IsClosable="False"
                                                          Margin="0,0,0,16"/>
                                                <ui:ToggleSwitch x:Name="PageEnableScreenBreakNotificationsCheckBox"
                                                               Content="Enable screen break notifications"
                                                               ToolTip="Protect your eyes with regular screen breaks"
                                                               Margin="0,0,0,16"/>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                                        <TextBlock Text="Reminder interval" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                        <Grid Width="150" HorizontalAlignment="Left">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <ui:NumberBox x:Name="PageScreenBreakReminderMinutesTextBox" 
                                                                        Grid.Column="0" 
                                                                        Value="20" 
                                                                        Minimum="1" 
                                                                        Maximum="120"/>
                                                            <TextBlock Grid.Column="1" Text="min" 
                                                                     VerticalAlignment="Center" 
                                                                     Margin="8,0,0,0"/>
                                                        </Grid>
                                                    </StackPanel>
                                                    <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                                        <ui:ToggleSwitch x:Name="PagePlaySoundWithBreakReminderCheckBox"
                                                                       Content="Play notification sound"
                                                                       ToolTip="Audio alert for screen break reminders"/>
                                                    </StackPanel>
                                                </Grid>
                                            </StackPanel>
                                        </ui:CardExpander>

                                        <!-- Sound Settings -->
                                        <ui:CardExpander Header="Sound Settings" Icon="🔊" Margin="0,0,0,8" IsExpanded="True">
                                            <StackPanel Margin="0,16,0,0">
                                                <StackPanel Margin="0,0,0,16">
                                                    <TextBlock Text="Notification sound" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                    <ComboBox x:Name="PageNotificationSoundComboBox" 
                                                            Width="250" 
                                                            HorizontalAlignment="Left"
                                                            SelectionChanged="PageNotificationSoundComboBox_SelectionChanged"/>
                                                </StackPanel>
                                                <StackPanel Margin="0,0,0,16">
                                                    <TextBlock Text="Volume" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                    <Grid Width="300" HorizontalAlignment="Left">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Slider x:Name="PageNotificationVolumeSlider" 
                                                               Grid.Column="0"
                                                               Minimum="0" 
                                                               Maximum="100" 
                                                               Value="50"
                                                               TickFrequency="10"
                                                               IsSnapToTickEnabled="True"
                                                               VerticalAlignment="Center"
                                                               ValueChanged="PageNotificationVolumeSlider_ValueChanged"/>
                                                        <TextBlock x:Name="PageVolumeValueText" 
                                                                 Grid.Column="1"
                                                                 Text="50%" 
                                                                 VerticalAlignment="Center" 
                                                                 Margin="12,0,0,0" 
                                                                 FontWeight="SemiBold"
                                                                 MinWidth="40"/>
                                                    </Grid>
                                                </StackPanel>
                                                <StackPanel Margin="0,0,0,8">
                                                    <ui:Button x:Name="TestNotificationButton"
                                                             Content="🔔 Test Notification" 
                                                             Click="TestNotification_Click"
                                                             Appearance="Secondary"
                                                             HorizontalAlignment="Left"
                                                             Padding="12,8"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </ui:CardExpander>
                                    </StackPanel>
                                </ui:Card>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</ui:FluentWindow>
